<% wrap_layout :layout do %>
<div class="container blog-post">
  <% if content_for?(:banner) %>
    <div class="post-banner">
      <%= yield_content :banner %>
    </div>
  <% end %>

  <header class="blog-post-header">
    <h2><%= current_article.title %></h2>
    <h4><%= current_article.data["author"] %></h4>
  </header>
  <div class="row">
    <div class="col-md-9">
      <main id="main" role="main">
      <%= yield %>
      </main>
    </div>
    <div class="col-md-3">
      <aside class="post-sidebar">
        <section  class="recent-ariticles">
          <h2 class="section-title">Recent Articles</h2>
          <ol>
            <% blog.articles[0...10].each do |article| %>
            <li>
              <span class="post-date"><%= article.date.strftime('%b %e') %></span>
              <%= link_to article.title, article %>
            </li>
            <% end %>
          </ol>
        </section>
        <section>
          <h2 class="section-title">Tags</h2>
          <ol>
            <% blog.tags.each do |tag, articles| %>
            <li><%= link_to "#{tag} (#{articles.size})", url_for(tag_path(tag).sub(/\/$/, '.html')) %></li>
            <% end %>
          </ol>
        </section>
        <section>
          <h2 class="section-title">By Year</h2>
          <ol>
            <% blog.articles.group_by {|a| a.date.year }.each do |year, articles| %>
            <li><%= link_to "#{year} (#{articles.size})", url_for(blog_year_path(year).sub(/\/$/, '.html')) %></li>
            <% end %>
          </ol>
        </section>
      </aside>
    </div>
  </div>
</div>
<% end %>
